!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.imageEditor=e():t.imageEditor=e()}(self,(()=>(()=>{"use strict";var t={958:(t,e,n)=>{n.d(e,{Z:()=>c});var o=n(81),i=n.n(o),r=n(645),a=n.n(r)()(i());a.push([t.id,".image-editor_container{position:relative}.image-editor_container .image-editor_canvas{width:100%;height:100%;background-color:#f2f2f2;border-radius:4px;border:1px solid #d3d3d3}.image-editor_container .image-editor_ui{position:absolute;top:0;right:0;left:0;margin:4px;display:flex;justify-content:space-between}.image-editor_container .image-editor_ui>*{display:flex;gap:4px}.image-editor_container button{position:relative;padding:4px;border:1px solid #808080;border-radius:4px;min-height:30px;min-width:30px;display:flex;align-items:center;justify-content:center}.image-editor_container button:not(.active):hover{background-color:#8ea6be;cursor:pointer}.image-editor_container button svg{position:relative;display:block;height:20px}.image-editor_container button.current{background-color:#708090}.image-editor_container button .colorIcon{position:absolute;top:4px;bottom:4px;left:4px;right:4px;border:1px solid black;border-radius:50%}.image-editor_container button .widthIcon{position:relative;background-color:black}\n",""]);const c=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,i,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);o&&a[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var r={},a=[],c=0;c<t.length;c++){var s=t[c],u=o.base?s[0]+o.base:s[0],l=r[u]||0,d="".concat(u," ").concat(l);r[u]=l+1;var p=n(d),h={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var v=i(h,o);o.byIndex=c,e.splice(c,0,{identifier:d,updater:v,references:1})}a.push(d)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var r=o(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var c=n(r[a]);e[c].references--}for(var s=o(t,i),u=0;u<r.length;u++){var l=n(r[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=s}}},569:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={id:o,exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0;var o={};return(()=>{n.r(o),n.d(o,{init:()=>A});var t=n(379),e=n.n(t),i=n(795),r=n.n(i),a=n(569),c=n.n(a),s=n(565),u=n.n(s),l=n(216),d=n.n(l),p=n(589),h=n.n(p),v=n(958),f={};f.styleTagTransform=h(),f.setAttributes=u(),f.insert=c().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=d(),e()(v.Z,f),v.Z&&v.Z.locals&&v.Z.locals;var g=function(){function t(t){this.image=new Image,this.image.src=t,this.w=this.image.width,this.h=this.image.height,this.x=0-this.w/2,this.y=0-this.h/2}return t.prototype.draw=function(t){var e=t.mapCoordsToDisplay(this.x,this.y,this.w,this.h);t.ctx.drawImage(this.image,e.x,e.y,e.w,e.h)},t}();const m=g;var w=function(){function t(t){this.container=t,this.el=document.createElement("canvas"),this.el.classList.add("image-editor_canvas"),t.appendChild(this.el),t.classList.add("image-editor_container"),this.ctx=this.el.getContext("2d"),this.setCanvasSize(),this.content=[],this.view={zoom:1,offset:{x:this.w/2,y:this.h/2}}}return t.prototype.setCanvasSize=function(){var t=this.el.getBoundingClientRect();this.el.height=t.height,this.el.width=t.width,this.x=t.left,this.y=t.top,this.w=t.width,this.h=t.height},t.prototype.draw=function(){for(var t in this.ctx.clearRect(0,0,this.w,this.h),this.background.draw(this),this.content)this.content[t].draw(this)},t.prototype.loadBgImage=function(t){var e=this;this.background=new m(t),this.setBgFullSize(),this.background.image.onload=function(){e.draw()}},t.prototype.setBgFullSize=function(){this.view.offset.x=this.w/2,this.view.offset.y=this.h/2;var t=(this.w-20)/this.background.w,e=(this.h-20)/this.background.h;this.view.zoom=Math.min(e,t),this.draw()},t.prototype.coordsOnBg=function(t,e){return t>=this.view.offset.x-this.background.w*this.view.zoom/2&&t<=this.view.offset.x+this.background.w*this.view.zoom/2&&e>=this.view.offset.y-this.background.h*this.view.zoom/2&&e<=this.view.offset.y+this.background.h*this.view.zoom/2},t.prototype.mapCoordsToOrigin=function(t,e,n,o){return{x:(t-this.view.offset.x)/this.view.zoom,y:(e-this.view.offset.y)/this.view.zoom,w:n/this.view.zoom,h:o/this.view.zoom}},t.prototype.mapCoordsToDisplay=function(t,e,n,o){return{x:t*this.view.zoom+this.view.offset.x,y:e*this.view.zoom+this.view.offset.y,w:n*this.view.zoom,h:o*this.view.zoom}},t}();const y=w,x=function(){function t(t){this.current=t,this.active=!1,this.lastUpdate={time:new Date,pos:{x:0,y:0}},this.icon=document.createElement("i"),this.icon.innerText="?"}return t.prototype.setCurrent=function(t){for(var e=0,n=Object.entries(t.tools);e<n.length;e++){var o=n[e];o[0],o[1].current=!1}this.current=!0,t.draw()},t.prototype.wheel=function(t,e){console.log("no wheel function set")},t.prototype.mousedown=function(t,e){console.log("no mousedown function set")},t.prototype.mouseup=function(t,e){console.log("no mouseup function set")},t.prototype.mousemove=function(t,e){console.log("no mousemove function set")},t}();var b=function(){function t(t,e,n){void 0===t&&(t="black"),void 0===e&&(e=4),void 0===n&&(n=[]),this.color=t,this.width=e,this.path=n}return t.prototype.addPoint=function(t,e){this.path.push({x:t,y:e})},t.prototype.draw=function(t){t.ctx.strokeStyle=this.color,t.ctx.lineWidth=this.width*t.view.zoom,t.ctx.beginPath();for(var e=0,n=this.path[e];n;){var o=t.mapCoordsToDisplay(n.x,n.y);0==e?t.ctx.moveTo(o.x,o.y):t.ctx.lineTo(o.x,o.y),n=this.path[++e]}t.ctx.stroke()},t}();const C=b;var _=[{name:"draw",string:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 490.305 490.305" style="enable-background:new 0 0 490.305 490.305;" xml:space="preserve"><g><path d="M472.469,81.443l-63.6-63.6c-13.1-16.4-53.2-30.2-83.4,0l-290.9,289.9l0,0c-4.4,4.4-6.5,10.1-6.2,15.6l-27.1,141.8   c-4.2,16.2,11.9,26.6,22.9,25l147-29.2c4.2,0,7.3-2.1,10.4-5.2l290.9-289.8C495.469,142.943,495.469,104.443,472.469,81.443z    M354.669,46.043c6.3-7.3,18.8-7.3,26.1,0l17.3,17l-289.7,289.7l-30.1-30.4L354.669,46.043z M61.769,364.043l64.4,64.4l-80.1,15.8   L61.769,364.043z M444.369,135.643l-276.8,276.8l-30.1-30.4l290-290l16.8,16.5C453.469,118.343,449.169,130.743,444.369,135.643z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>'},{name:"move",string:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 330 330" style="enable-background:new 0 0 330 330;" xml:space="preserve">    <path id="XMLID_225_" d="M326.602,174.506c0.139-0.17,0.26-0.349,0.392-0.524c0.162-0.216,0.33-0.428,0.48-0.654  c0.144-0.213,0.267-0.435,0.397-0.654c0.12-0.2,0.246-0.396,0.356-0.603c0.12-0.225,0.223-0.457,0.331-0.687  c0.101-0.214,0.207-0.424,0.299-0.643c0.093-0.225,0.168-0.455,0.25-0.683c0.083-0.233,0.173-0.463,0.245-0.702  c0.069-0.231,0.121-0.465,0.18-0.699c0.061-0.241,0.128-0.479,0.177-0.725c0.054-0.272,0.086-0.547,0.125-0.822  c0.03-0.21,0.07-0.416,0.091-0.629c0.098-0.986,0.098-1.979,0-2.965c-0.021-0.213-0.061-0.419-0.091-0.629  c-0.039-0.274-0.071-0.55-0.125-0.822c-0.049-0.246-0.116-0.483-0.177-0.725c-0.059-0.233-0.11-0.468-0.18-0.699  c-0.072-0.238-0.162-0.468-0.245-0.702c-0.082-0.228-0.157-0.458-0.25-0.683c-0.092-0.219-0.198-0.429-0.299-0.643  c-0.108-0.23-0.211-0.461-0.331-0.687c-0.11-0.206-0.236-0.403-0.356-0.603c-0.131-0.219-0.254-0.441-0.397-0.654  c-0.15-0.226-0.318-0.438-0.48-0.654c-0.132-0.175-0.253-0.354-0.392-0.524c-0.315-0.384-0.646-0.753-0.998-1.103l-54.995-54.997  c-5.856-5.857-15.354-5.858-21.213-0.001c-5.858,5.858-5.858,15.355,0,21.213L278.788,150H180V51.213l29.394,29.393  c2.929,2.929,6.768,4.393,10.606,4.393s7.678-1.464,10.606-4.393c5.858-5.858,5.858-15.355,0-21.213L175.609,4.396  c-0.347-0.346-0.711-0.675-1.089-0.987c-0.1-0.082-0.207-0.151-0.308-0.23c-0.285-0.223-0.571-0.444-0.872-0.646  c-0.094-0.063-0.194-0.115-0.289-0.175c-0.318-0.203-0.639-0.403-0.973-0.582c-0.07-0.038-0.145-0.067-0.216-0.104  c-0.363-0.188-0.731-0.368-1.112-0.526c-0.05-0.02-0.103-0.036-0.153-0.056c-0.401-0.162-0.809-0.311-1.226-0.439  c-0.056-0.017-0.112-0.026-0.167-0.043c-0.411-0.12-0.827-0.23-1.252-0.315c-0.128-0.025-0.259-0.037-0.388-0.059  c-0.354-0.061-0.706-0.124-1.067-0.159C166.002,0.026,165.503,0,165,0c-0.502,0-1.002,0.026-1.497,0.076  c-0.368,0.037-0.727,0.1-1.087,0.162c-0.122,0.021-0.247,0.032-0.368,0.056c-0.433,0.086-0.854,0.197-1.272,0.32  c-0.049,0.014-0.098,0.023-0.146,0.038c-0.425,0.129-0.84,0.282-1.249,0.447c-0.042,0.018-0.087,0.03-0.129,0.047  c-0.388,0.161-0.764,0.344-1.135,0.536c-0.063,0.033-0.131,0.06-0.194,0.093c-0.341,0.184-0.669,0.387-0.994,0.595  c-0.088,0.056-0.18,0.105-0.268,0.163c-0.31,0.207-0.605,0.435-0.898,0.665c-0.093,0.072-0.19,0.136-0.282,0.211  c-0.379,0.312-0.743,0.641-1.09,0.987L99.396,59.393c-5.858,5.858-5.858,15.355,0,21.213c5.857,5.857,15.355,5.858,21.213,0  L150,51.214V150H51.213l29.394-29.394c5.858-5.858,5.858-15.355,0-21.213c-5.857-5.858-15.355-5.858-21.213,0L4.397,154.391  c-0.351,0.35-0.683,0.719-0.998,1.103c-0.139,0.17-0.261,0.349-0.392,0.524c-0.162,0.216-0.33,0.428-0.48,0.654  c-0.144,0.213-0.267,0.435-0.398,0.654c-0.12,0.2-0.246,0.396-0.356,0.603c-0.121,0.225-0.223,0.457-0.331,0.687  c-0.101,0.214-0.207,0.424-0.299,0.643c-0.093,0.225-0.168,0.455-0.25,0.683c-0.083,0.233-0.173,0.463-0.245,0.702  c-0.069,0.231-0.121,0.465-0.18,0.699c-0.061,0.241-0.128,0.479-0.177,0.725c-0.054,0.272-0.087,0.547-0.125,0.822  c-0.03,0.21-0.07,0.416-0.091,0.629c-0.098,0.986-0.098,1.979,0,2.965c0.021,0.213,0.061,0.419,0.091,0.629  c0.038,0.274,0.071,0.55,0.125,0.822c0.049,0.246,0.116,0.483,0.177,0.725c0.059,0.233,0.11,0.468,0.18,0.699  c0.072,0.238,0.162,0.468,0.245,0.702c0.082,0.228,0.157,0.458,0.25,0.683c0.092,0.219,0.198,0.429,0.299,0.643  c0.108,0.23,0.21,0.461,0.331,0.687c0.11,0.206,0.236,0.403,0.356,0.603c0.131,0.219,0.254,0.441,0.398,0.654  c0.15,0.226,0.318,0.438,0.48,0.654c0.131,0.175,0.253,0.354,0.392,0.524c0.316,0.384,0.647,0.753,0.998,1.103l54.997,54.997  C62.322,233.536,66.161,235,70,235s7.678-1.464,10.606-4.394c5.858-5.858,5.858-15.355,0-21.213L51.213,180H150v98.786  l-29.392-29.392c-5.857-5.858-15.355-5.857-21.213,0c-5.858,5.858-5.858,15.355,0,21.213l54.995,54.997  c0.347,0.347,0.711,0.676,1.09,0.987c0.092,0.075,0.189,0.138,0.282,0.21c0.293,0.23,0.588,0.458,0.898,0.665  c0.088,0.058,0.18,0.106,0.268,0.163c0.325,0.208,0.653,0.412,0.994,0.595c0.063,0.034,0.131,0.06,0.194,0.093  c0.371,0.192,0.747,0.375,1.135,0.536c0.042,0.018,0.087,0.03,0.129,0.047c0.409,0.165,0.824,0.318,1.249,0.447  c0.049,0.015,0.098,0.023,0.146,0.038c0.418,0.123,0.84,0.233,1.272,0.32c0.121,0.024,0.246,0.035,0.368,0.056  c0.359,0.063,0.719,0.125,1.087,0.162c0.495,0.05,0.995,0.076,1.497,0.076s1.002-0.026,1.497-0.076  c0.368-0.037,0.727-0.1,1.087-0.162c0.122-0.022,0.247-0.032,0.368-0.056c0.433-0.086,0.854-0.197,1.272-0.32  c0.049-0.014,0.098-0.023,0.146-0.038c0.425-0.129,0.84-0.282,1.249-0.447c0.042-0.018,0.087-0.03,0.129-0.047  c0.388-0.161,0.764-0.344,1.135-0.536c0.063-0.033,0.131-0.06,0.194-0.093c0.341-0.184,0.669-0.387,0.994-0.595  c0.088-0.056,0.18-0.104,0.268-0.163c0.31-0.207,0.605-0.435,0.898-0.665c0.093-0.072,0.19-0.136,0.282-0.21  c0.379-0.312,0.743-0.641,1.09-0.987l54.997-54.997c5.858-5.857,5.858-15.355,0-21.213c-5.856-5.857-15.354-5.858-21.213,0  L180,278.787V180h98.788l-29.393,29.394c-5.858,5.858-5.858,15.355,0,21.213c2.929,2.929,6.768,4.393,10.607,4.393  c3.839,0,7.678-1.465,10.606-4.394l54.995-54.997C325.955,175.259,326.286,174.89,326.602,174.506z"/>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    <g>    </g>    </svg>'},{name:"full",string:'<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none">    <path d="M2 6.75C2 5.23122 3.23122 4 4.75 4H19.25C20.7688 4 22 5.23122 22 6.75V17.25C22 18.7688 20.7688 20 19.25 20H4.75C3.23122 20 2 18.7688 2 17.25V6.75ZM16.7808 7.21967C16.6402 7.07902 16.4494 7 16.2505 7L13.7493 7C13.3351 7 12.9993 7.33579 12.9993 7.75C12.9993 8.16421 13.3351 8.5 13.7493 8.5H14.4393L12.7197 10.219C12.4267 10.5118 12.4266 10.9867 12.7194 11.2796C13.0123 11.5726 13.4871 11.5727 13.7801 11.2798L15.5005 9.56014V10.25C15.5005 10.6642 15.8363 11 16.2505 11C16.6647 11 17.0005 10.6642 17.0005 10.25V7.75C17.0005 7.55109 16.9215 7.36032 16.7808 7.21967ZM7.75 16.9999H10.2512C10.6654 16.9999 11.0012 16.6641 11.0012 16.2499C11.0012 15.8357 10.6654 15.4999 10.2512 15.4999H9.56045L11.2804 13.7797C11.5732 13.4868 11.5732 13.0119 11.2803 12.719C10.9874 12.4261 10.5125 12.4262 10.2196 12.7191L8.5 14.439V13.7499C8.5 13.3357 8.16421 12.9999 7.75 12.9999C7.33579 12.9999 7 13.3357 7 13.7499L7 16.2499C7 16.4488 7.07902 16.6396 7.21967 16.7802C7.36032 16.9209 7.55109 16.9999 7.75 16.9999Z" fill="#212121"/></svg>'},{name:"rect",string:'<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="-2 -4 24 24" preserveAspectRatio="xMinYMin"><path d="M3 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H3zm0-2h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3z"/></svg>'}],k=new DOMParser,L={};for(var z in _){var O=k.parseFromString(_[z].string,"application/xml").documentElement;L[_[z].name]=O}const E=L;var T,S=(T=function(t,e){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},T(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const j=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=E.draw,n}return S(e,t),e.prototype.wheel=function(t,e){var n=e.deltaY/1e3+1;t.canvas.view.zoom=t.canvas.view.zoom*n,t.canvas.draw()},e.prototype.mousedown=function(t,e){t.canvas.coordsOnBg(e.x-t.canvas.x,e.y-t.canvas.y)&&(this.active=!0,t.canvas.content.push(new C(t.settings.activeColor,t.settings.activeWidth)))},e.prototype.mouseup=function(t,e){this.active=!1,t.canvas.draw()},e.prototype.mousemove=function(t,e){if(this.active)if(t.canvas.coordsOnBg(e.x-t.canvas.x,e.y-t.canvas.y)){if((new Date).getTime()-this.lastUpdate.time.getTime()>=20){this.lastUpdate.time=new Date;var n=t.canvas.mapCoordsToOrigin(e.x-t.canvas.x,e.y-t.canvas.y);t.canvas.content[t.canvas.content.length-1].addPoint(n.x,n.y),t.canvas.draw()}}else this.active=!1,t.canvas.draw()},e}(x);var M=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const B=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=E.move,n}return M(e,t),e.prototype.wheel=function(t,e){var n=e.deltaY/1e3+1;t.canvas.view.zoom=t.canvas.view.zoom*n,t.canvas.draw()},e.prototype.mousedown=function(t,e){t.canvas.coordsOnBg(e.x-t.canvas.x,e.y-t.canvas.y)&&(this.active=!0,t.canvas.el.style.cursor="grabbing",this.lastUpdate.pos.x=e.x-t.canvas.x,this.lastUpdate.pos.y=e.y-t.canvas.y)},e.prototype.mouseup=function(t,e){this.active=!1,t.canvas.el.style.cursor="auto",t.canvas.draw()},e.prototype.mousemove=function(t,e){if(this.active){if((new Date).getTime()-this.lastUpdate.time.getTime()>=20){this.lastUpdate.time=new Date;var n=e.x-t.canvas.x-this.lastUpdate.pos.x,o=e.y-t.canvas.y-this.lastUpdate.pos.y;this.lastUpdate.pos.x=e.x-t.canvas.x,this.lastUpdate.pos.y=e.y-t.canvas.y,t.canvas.view.offset.x+=n,t.canvas.view.offset.y+=o,t.canvas.draw()}}else t.canvas.coordsOnBg(e.x-t.canvas.x,e.y-t.canvas.y)?t.canvas.el.style.cursor="grab":t.canvas.el.style.cursor="auto"},e}(x);var P=function(){function t(t,e,n,o,i,r){void 0===t&&(t="black"),void 0===e&&(e=4),this.color=t,this.width=e,this.x=n,this.y=o,this.w=i,this.h=r}return t.prototype.updateRect=function(t,e){this.w=t-this.x,this.h=e-this.y},t.prototype.draw=function(t){var e=t.mapCoordsToDisplay(this.x,this.y,this.w,this.h);t.ctx.lineWidth=this.width*t.view.zoom,t.ctx.strokeStyle=this.color,t.ctx.beginPath(),t.ctx.rect(e.x,e.y,e.w,e.h),t.ctx.stroke()},t}();const U=P;var I=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const D=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=E.rect,n}return I(e,t),e.prototype.wheel=function(t,e){var n=e.deltaY/1e3+1;t.canvas.view.zoom=t.canvas.view.zoom*n,t.canvas.draw()},e.prototype.mousedown=function(t,e){if(t.canvas.coordsOnBg(e.x-t.canvas.x,e.y-t.canvas.y)){this.active=!0;var n=t.canvas.mapCoordsToOrigin(e.x-t.canvas.x,e.y-t.canvas.y);this.lastUpdate.pos.x=n.x,this.lastUpdate.pos.y=n.y,t.canvas.content.push(new U(t.settings.activeColor,t.settings.activeWidth,n.x,n.y,0,0))}},e.prototype.mouseup=function(t,e){this.active=!1,t.canvas.draw()},e.prototype.mousemove=function(t,e){if(this.active)if(t.canvas.coordsOnBg(e.x-t.canvas.x,e.y-t.canvas.y)){if((new Date).getTime()-this.lastUpdate.time.getTime()>=20){this.lastUpdate.time=new Date;var n=t.canvas.mapCoordsToOrigin(e.x-t.canvas.x,e.y-t.canvas.y);t.canvas.content[t.canvas.content.length-1].updateRect(n.x,n.y),t.canvas.draw()}}else this.active=!1,t.canvas.draw()},e}(x);var H=function(){function t(t,e){this.container=t,this.scope=this,this.canvas=new y(this.container),this.tools={move:new B(!1),draw:new j(!0),rect:new D(!1)},this.settings={activeColor:"red",colors:["red","green","blue","black","white"],activeWidth:4,widths:[2,4,8,16]},this.canvas.loadBgImage(e),this.setControls(),this.draw()}return t.prototype.draw=function(){var t=this,e=this.container.querySelector(".image-editor_ui");e&&e.remove();var n=document.createElement("div");n.classList.add("image-editor_ui"),n.appendChild(function(){var e=document.createElement("div");e.classList.add("image-editor_toolbox");for(var n=function(n,o){var i=o,r=document.createElement("button");i.current&&r.classList.add("current"),r.addEventListener("click",(function(e){i.setCurrent(t)})),r.appendChild(i.icon),e.appendChild(r)},o=0,i=Object.entries(t.tools);o<i.length;o++){var r=i[o];n(0,(r[0],r[1]))}return e}()),n.appendChild(function(){var e=document.createElement("div");e.classList.add("image-editor_settings");var n=function(n){var o=document.createElement("button");t.settings.colors[n]==t.settings.activeColor&&o.classList.add("current"),o.addEventListener("click",(function(e){t.settings.activeColor=t.settings.colors[n],t.draw()}));var i=document.createElement("span");i.classList.add("colorIcon"),i.style.backgroundColor=t.settings.colors[n],o.appendChild(i),e.appendChild(o)};for(var o in t.settings.colors)n(o);var i=function(n){var o=document.createElement("button");t.settings.widths[n]==t.settings.activeWidth&&o.classList.add("current"),o.addEventListener("click",(function(e){t.settings.activeWidth=t.settings.widths[n],t.draw()}));var i=document.createElement("span");i.classList.add("widthIcon"),i.style.width=t.settings.widths[n]+"px",i.style.height=t.settings.widths[n]+"px",o.appendChild(i),e.appendChild(o)};for(var o in t.settings.widths)i(o);return e}()),n.appendChild(function(){var e=document.createElement("div");e.classList.add("image-editor_util");var n=document.createElement("button");return n.addEventListener("click",(function(e){t.canvas.setBgFullSize()})),n.appendChild(E.full),e.appendChild(n),e}()),this.container.appendChild(n)},t.prototype.getBlob=function(){return t=this,e=void 0,o=function(){return function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}(this,(function(t){return this.scope.canvas.el.toBlob((function(t){t.text().then((function(t){return t}))}),"image/jpeg",.95),[2]}))},new((n=void 0)||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function c(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}));var t,e,n,o},t.prototype.setControls=function(){var t=this;function e(e,n){for(var o=0,i=Object.entries(t.tools);o<i.length;o++){var r=i[o],a=(r[0],r[1]);a.current&&a[e](t,n)}}window.addEventListener("resize",(function(){t.canvas.setCanvasSize()})),this.container.addEventListener("wheel",(function(t){e("wheel",t)})),this.container.addEventListener("mousedown",(function(t){e("mousedown",t)})),this.container.addEventListener("mouseup",(function(t){e("mouseup",t)})),this.container.addEventListener("mousemove",(function(t){e("mousemove",t)}))},t}();const V=H;function A(t,e){return new V(t,e)}})(),o})()));